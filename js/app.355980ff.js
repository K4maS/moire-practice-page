(function(){"use strict";var e={1835:function(e,t,r){var s=r(9242),a=r(3396);function o(e,t,r,s,o,i){const c=(0,a.up)("appHeader"),l=(0,a.up)("router-view"),n=(0,a.up)("appFooter");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(c),(0,a.Wm)(l),(0,a.Wm)(n)],64)}var i=r(7139);const c={class:"header container"},l={class:"header__wrapper"},n=(0,a._)("span",{class:"header__info"},"Каталог",-1),d=(0,a._)("img",{src:"/moire-practice-page/img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"},null,-1),u=(0,a._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),_=(0,a._)("svg",{width:"19",height:"24"},[(0,a._)("use",{"xlink:href":"#icon-cart"})],-1),p={key:0,class:"header__count","aria-label":"Количество товаров"},m=(0,a._)("div",{class:"header__count-spinner"},[(0,a._)("svg",{fill:"white",height:"7px",width:"7px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 367.136 367.136","xml:space":"preserve"},[(0,a._)("path",{d:"M367.136,149.7V36.335l-39.14,38.953c-13.024-17.561-29.148-32.731-47.732-44.706 c-29.33-18.898-63.352-28.888-98.391-28.888C81.588,1.694,0,83.282,0,183.568s81.588,181.874,181.874,181.874 c34.777,0,68.584-9.851,97.768-28.488c28.394-18.133,51.175-43.703,65.881-73.944l-26.979-13.119 c-25.66,52.77-78.029,85.551-136.669,85.551C98.13,335.442,30,267.312,30,183.568S98.13,31.694,181.874,31.694 c49.847,0,96.439,24.9,124.571,65.042L253.226,149.7H367.136z"})])],-1),g=[m],h={key:1,class:"header__count","aria-label":"Количество товаров"},k={key:2,class:"header__count","aria-label":"Количество товаров"};function y(e,t,r,s,o,m){const y=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("header",c,[(0,a._)("div",l,[n,(0,a.Wm)(y,{class:"header__logo",to:{name:"catalog"}},{default:(0,a.w5)((()=>[d])),_:1}),u,e.$store.state.cartProducts?((0,a.wg)(),(0,a.j4)(y,{key:0,class:"header__cart",to:{name:"cart"},"aria-label":"Корзина с товарами"},{default:(0,a.w5)((()=>[_,e.$store.state.loadingProcess?((0,a.wg)(),(0,a.iD)("span",p,g)):e.$store.state.loadingError?((0,a.wg)(),(0,a.iD)("span",h," Er! ")):e.$store.state.cartProducts.length?((0,a.wg)(),(0,a.iD)("span",k,(0,i.zw)(e.$store.state.cartProducts.length),1)):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)])])}var f={computed:{},methods:{}},b=r(89);const w=(0,b.Z)(f,[["render",y]]);var v=w;const P={class:"footer container"},I=(0,a.uE)('<div class="footer__wrapper"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Moire </span></div>',1),C=[I];function D(e,t,r,s,o,i){return(0,a.wg)(),(0,a.iD)("footer",P,C)}var L={};const x=(0,b.Z)(L,[["render",D]]);var E=x,z=r(65),U={components:{appHeader:v,appFooter:E},methods:{...(0,z.nv)(["loadBasket"]),...(0,z.OI)(["updateUserAccessKey"])},created(){const e=localStorage.getItem("userAccessKey");e&&this.updateUserAccessKey(e),this.loadBasket()}};const $=(0,b.Z)(U,[["render",o]]);var B=$,T=r(2483);const K={class:"content container"},S={class:"content__top"},M={class:"content__row"},j=(0,a._)("h1",{class:"content__title"}," Каталог ",-1),q={key:0,class:"content__info"},V={key:1,class:"content__info"},A={key:2,class:"content__info"},O={class:"content__catalog"},W={key:0,class:"catalog"},Z={key:1,class:"catalog"},H={key:2,class:"catalog"},Y={class:"catalog__list"};function F(e,t,r,s,o,c){const l=(0,a.up)("catalogFilter"),n=(0,a.up)("spinnerBlock"),d=(0,a.up)("refreshBlock"),u=(0,a.up)("catalogItem"),_=(0,a.up)("catalogPagination");return(0,a.wg)(),(0,a.iD)("main",K,[(0,a._)("div",S,[(0,a._)("div",M,[j,1===o.productsTotal?((0,a.wg)(),(0,a.iD)("span",q,(0,i.zw)(o.productsTotal)+" товар ",1)):o.productsTotal<5?((0,a.wg)(),(0,a.iD)("span",V,(0,i.zw)(o.productsTotal)+" товара ",1)):((0,a.wg)(),(0,a.iD)("span",A,(0,i.zw)(o.productsTotal)+" товаров ",1))])]),(0,a._)("div",O,[(0,a.Wm)(l,{"max-price":o.maxPrice,"onUpdate:maxPrice":t[0]||(t[0]=e=>o.maxPrice=e),"min-price":o.minPrice,"onUpdate:minPrice":t[1]||(t[1]=e=>o.minPrice=e),"category-id":o.categoryId,"onUpdate:categoryId":t[2]||(t[2]=e=>o.categoryId=e),"material-ids":o.materialIds,"onUpdate:materialIds":t[3]||(t[3]=e=>o.materialIds=e),"season-ids":o.seasonIds,"onUpdate:seasonIds":t[4]||(t[4]=e=>o.seasonIds=e),limit:o.limit,"onUpdate:limit":t[5]||(t[5]=e=>o.limit=e)},null,8,["max-price","min-price","category-id","material-ids","season-ids","limit"]),o.loadingProcess?((0,a.wg)(),(0,a.iD)("section",W,[(0,a.Wm)(n)])):o.loadingError?((0,a.wg)(),(0,a.iD)("section",Z,[(0,a.Wm)(d,{onClick:t[6]||(t[6]=e=>c.refresh())})])):((0,a.wg)(),(0,a.iD)("section",H,[(0,a._)("ul",Y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.products,(e=>((0,a.wg)(),(0,a.j4)(u,{"catalog-item":e,key:e.id},null,8,["catalog-item"])))),128))]),(0,a.Wm)(_,{modelValue:o.currentPage,"onUpdate:modelValue":t[7]||(t[7]=e=>o.currentPage=e),pages:o.pages},null,8,["modelValue","pages"])]))])])}const N={class:"catalog__item"},G=["src","srcset"],J={class:"catalog__title"},R={class:"catalog__price"},Q={class:"colors colors--black"},X={class:"colors__label"},ee=["id","name","value","checked","onClick"];function te(e,t,r,s,o,c){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("li",N,[(0,a.Wm)(l,{class:"catalog__pic",to:{name:"product",params:{id:r.catalogItem.id}}},{default:(0,a.w5)((()=>[(0,a._)("img",{alt:"Название товара",src:c.checkImage(r.catalogItem),srcset:c.checkImage(r.catalogItem)},null,8,G)])),_:1},8,["to"]),(0,a._)("h3",J,[(0,a.Wm)(l,{to:{name:"product",params:{id:r.catalogItem.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(r.catalogItem.title),1)])),_:1},8,["to"])]),(0,a._)("span",R,(0,i.zw)(c.formattedPrice(r.catalogItem.price))+" ₽ ",1),(0,a._)("ul",Q,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.catalogItem.colors,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"colors__item",key:e.color.id},[(0,a._)("label",X,[(0,a._)("input",{class:"colors__radio sr-only",type:"radio",id:"colors-for-"+e.color.id,name:"colors-for-"+r.catalogItem.slug,value:o.checkedColor,checked:r.catalogItem.colors[o.checkedColor].color==e.color,onClick:t=>c.chooseColor(r.catalogItem.colors,e)},null,8,ee),(0,a._)("span",{class:"colors__value",style:(0,i.j5)({background:e.color.code})},null,4)])])))),128))])])}var re=r(4870);function se(e){return(new Intl.NumberFormat).format(e)}var ae={data(){return{checkedColor:0}},props:["catalogItem"],methods:{checkImage(e){return e.colors[this.checkedColor].gallery?e.colors[this.checkedColor].gallery[0].file.url:"/moire-practice-page/img/placeholder-3.png"},chooseColor(e,t){const r=(0,re.IU)(e),s=(0,re.IU)(t);let a=0;return r.forEach((e=>{e===s&&(this.checkedColor=a,console.log(a)),a+=1})),this.checkedColor},formattedPrice(e){return se(e)}},computed:{}};const oe=(0,b.Z)(ae,[["render",te]]);var ie=oe;const ce={class:"catalog__pagination pagination"},le={class:"pagination__item"},ne=(0,a._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-arrow-left"})],-1),de=[ne],ue=["onClick"],_e={class:"pagination__item"},pe=(0,a._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-arrow-right"})],-1),me=[pe];function ge(e,t,r,o,c,l){return(0,a.wg)(),(0,a.iD)("ul",ce,[(0,a._)("li",le,[(0,a._)("a",{class:(0,i.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1==l.currentPage}]),href:"#","aria-label":"Предыдущая страница",onClick:t[0]||(t[0]=(0,s.iM)((e=>l.pageChanging("prev")),["prevent"]))},de,2)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.pages,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"pagination__item",key:e},[(0,a._)("a",{class:(0,i.C_)(["pagination__link",{"pagination__link--current":l.currentPage==e}]),href:"#",onClick:(0,s.iM)((t=>l.pageChanging(e)),["prevent"])},(0,i.zw)(e),11,ue)])))),128)),(0,a._)("li",_e,[(0,a._)("a",{class:(0,i.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":l.currentPage==r.pages}]),href:"#","aria-label":"Следующая страница",onClick:t[1]||(t[1]=(0,s.iM)((e=>l.pageChanging("next")),["prevent"]))},me,2)])])}var he={props:["modelValue","pages"],methods:{pageChanging(e){"prev"===e?this.$emit("update:modelValue",this.currentPage-1):"next"===e?this.$emit("update:modelValue",this.currentPage+1):this.$emit("update:modelValue",e)}},computed:{currentPage(){return this.modelValue}}};const ke=(0,b.Z)(he,[["render",ge]]);var ye=ke;const fe={class:"filter"},be={class:"form__block"},we=(0,a._)("legend",{class:"form__legend"},"Цена",-1),ve={for:"min-price",class:"form__label form__label--price"},Pe=(0,a._)("span",{class:"form__value"},"От",-1),Ie={for:"max-price",class:"form__label form__label--price"},Ce=(0,a._)("span",{class:"form__value"},"До",-1),De={class:"form__block"},Le=(0,a._)("legend",{class:"form__legend"},"Категория",-1),xe={for:"category",class:"form__label form__label--select"},Ee={value:0,key:0},ze=["value"],Ue={class:"form__block"},$e=(0,a._)("legend",{class:"form__legend"},"Материал",-1),Be={class:"check-list"},Te={class:"check-list__label"},Ke=["value"],Se={class:"check-list__desc"},Me={class:"form__block"},je=(0,a._)("legend",{class:"form__legend"},"Коллекция",-1),qe={class:"check-list"},Ve={class:"check-list__label"},Ae=["name","value"],Oe={class:"check-list__desc"},We=(0,a._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1);function Ze(e,t,r,o,c,l){return(0,a.wg)(),(0,a.iD)("aside",fe,[(0,a._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:t[6]||(t[6]=(0,s.iM)((e=>l.submit()),["prevent"]))},[(0,a._)("fieldset",be,[we,(0,a._)("label",ve,[(0,a.wy)((0,a._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":t[0]||(t[0]=e=>c.currentMinPrice=e)},null,512),[[s.nr,c.currentMinPrice,void 0,{number:!0}]]),Pe]),(0,a._)("label",Ie,[(0,a.wy)((0,a._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":t[1]||(t[1]=e=>c.currentMaxPrice=e)},null,512),[[s.nr,c.currentMaxPrice,void 0,{number:!0}]]),Ce])]),(0,a._)("fieldset",De,[Le,(0,a._)("label",xe,[(0,a.wy)((0,a._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>c.currentCategoryId=e)},[((0,a.wg)(),(0,a.iD)("option",Ee," Все категории ")),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.productCategoriesList,(e=>((0,a.wg)(),(0,a.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.title),9,ze)))),128))],512),[[s.bM,c.currentCategoryId,void 0,{number:!0}]])])]),(0,a._)("fieldset",Ue,[$e,(0,a._)("ul",Be,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.materialsList,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"check-list__item",key:e.id},[(0,a._)("label",Te,[(0,a.wy)((0,a._)("input",{class:"check-list__check sr-only","onUpdate:modelValue":t[3]||(t[3]=e=>c.currentMaterialIds=e),type:"checkbox",name:"material",value:e.id},null,8,Ke),[[s.e8,c.currentMaterialIds]]),(0,a._)("span",Se,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),(0,a._)("span",null,"("+(0,i.zw)(e.productsCount)+")",1)])])])))),128))])]),(0,a._)("fieldset",Me,[je,(0,a._)("ul",qe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.seasonList,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"check-list__item",key:e.id},[(0,a._)("label",Ve,[(0,a.wy)((0,a._)("input",{class:"check-list__check sr-only",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>c.currentSeasonIds=e),name:e.id,value:e.id},null,8,Ae),[[s.e8,c.currentSeasonIds]]),(0,a._)("span",Oe,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),(0,a._)("span",null,"("+(0,i.zw)(e.productsCount)+")",1)])])])))),128))])]),We,c.currentCategoryId||c.currentMinPrice||c.currentMaxPrice||c.currentMaterialIds.length||c.currentSeasonIds.length?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"filter__reset button button--second",type:"button",onClick:t[5]||(t[5]=e=>l.clear())}," Сбросить ")):(0,a.kq)("",!0)],32)])}var He="https://vue-moire.skillbox.cc",Ye={data(){return{currentCategoryId:0,currentMaterialIds:[],currentSeasonIds:[],currentMinPrice:0,currentMaxPrice:0,seasonList:null,productCategoriesList:0,materialsList:null}},props:["categoryId","materialIds","seasonIds","minPrice","maxPrice"],methods:{submit(){this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:materialIds",this.currentMaterialIds),this.$emit("update:seasonIds",this.currentSeasonIds),this.$emit("update:minPrice",this.currentMinPrice),this.$emit("update:maxPrice",this.currentMaxPrice)},clear(){this.$emit("update:categoryId",0),this.$emit("update:materialIds",null),this.$emit("update:seasonIds",null),this.$emit("update:minPrice",0),this.$emit("update:maxPrice",0),this.currentCategoryId=0,this.currentMaterialIds=[],this.currentSeasonIds=[],this.currentMinPrice=0,this.currentMaxPrice=0},getSeasonsList(){return fetch(`${He}/api/seasons`).then((async e=>{const t=await e.json();this.seasonList=await t.items}))},getMaterialsList(){return fetch(`${He}/api/materials`).then((async e=>{const t=await e.json();this.materialsList=await t.items}))},getProductCategoriesList(){return fetch(`${He}/api/productCategories`).then((async e=>{const t=await e.json();this.productCategoriesList=await t.items}))}},computed:{},created(){this.getSeasonsList(),this.getMaterialsList(),this.getProductCategoriesList(),this.$route.params.id&&(this.currentCategoryId=this.$route.params.id)}};const Fe=(0,b.Z)(Ye,[["render",Ze]]);var Ne=Fe;const Ge={class:"spinner"},Je=(0,a._)("span",{class:"content__info"}," Загрузка... ",-1),Re=(0,a._)("div",{class:"spinner__image"},[(0,a._)("svg",{height:"50px",width:"50px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 367.136 367.136","xml:space":"preserve"},[(0,a._)("path",{d:"M367.136,149.7V36.335l-39.14,38.953c-13.024-17.561-29.148-32.731-47.732-44.706 c-29.33-18.898-63.352-28.888-98.391-28.888C81.588,1.694,0,83.282,0,183.568s81.588,181.874,181.874,181.874 c34.777,0,68.584-9.851,97.768-28.488c28.394-18.133,51.175-43.703,65.881-73.944l-26.979-13.119 c-25.66,52.77-78.029,85.551-136.669,85.551C98.13,335.442,30,267.312,30,183.568S98.13,31.694,181.874,31.694 c49.847,0,96.439,24.9,124.571,65.042L253.226,149.7H367.136z"})])],-1),Qe=[Je,Re];function Xe(e,t,r,s,o,i){return(0,a.wg)(),(0,a.iD)("div",Ge,Qe)}var et={};const tt=(0,b.Z)(et,[["render",Xe]]);var rt=tt;const st={class:"refresh-spinner"},at=(0,a._)("span",{class:"content__info"}," Произошла ошибка загрузки. ",-1),ot=(0,a._)("button",{class:"refresh-spinner__image"},[(0,a._)("svg",{height:"50px",width:"50px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 383.748 383.748","xml:space":"preserve"},[(0,a._)("g",null,[(0,a._)("path",{d:"M62.772,95.042C90.904,54.899,137.496,30,187.343,30c83.743,0,151.874,68.13,151.874,151.874h30\n\t\tC369.217,81.588,287.629,0,187.343,0c-35.038,0-69.061,9.989-98.391,28.888C70.368,40.862,54.245,56.032,41.221,73.593\n\t\tL2.081,34.641v113.365h113.91L62.772,95.042z"}),(0,a._)("path",{d:"M381.667,235.742h-113.91l53.219,52.965c-28.132,40.142-74.724,65.042-124.571,65.042\n\t\tc-83.744,0-151.874-68.13-151.874-151.874h-30c0,100.286,81.588,181.874,181.874,181.874c35.038,0,69.062-9.989,98.391-28.888\n\t\tc18.584-11.975,34.707-27.145,47.731-44.706l39.139,38.952V235.742z"})])])],-1),it=[at,ot];function ct(e,t,r,s,o,i){return(0,a.wg)(),(0,a.iD)("div",st,it)}var lt={data(){return{}},props:["reload"],methods:{reloading(){}}};const nt=(0,b.Z)(lt,[["render",ct]]);var dt=nt,ut={data(){return{products:[],loadingProcess:!1,loadingError:!1,pages:0,productsTotal:0,categoryId:0,materialIds:[],seasonIds:[],colorIds:[],currentPage:1,limit:12,minPrice:0,maxPrice:0}},computed:{formattedPrice(e){return se(e)}},methods:{loadProducts(){return this.loadingProcess=!0,this.loadingError=!1,fetch(`${He}/api/products?page=${this.currentPage}&categoryId=${this.categoryId}&materialIds[]=${this.materialIds}&seasonIds[]=${this.seasonIds}&colorIds[]=${this.colorIds}&minPrice=${this.minPrice}&maxPrice=${this.maxPrice}&limit=${this.limit}`).then((async e=>{const t=await e.json();this.products=t.items,this.pages=t.pagination.pages,this.currentPage=t.pagination.page,this.productsTotal=t.pagination.total})).catch((()=>{this.loadingError=!0})).finally((()=>{this.loadingProcess=!1}))},refresh(){this.loadProducts()}},watch:{currentPage(){this.loadProducts()},materialIds(){this.loadProducts()},seasonIds(){this.loadProducts()},colorIds(){this.loadProducts()},minPrice(){this.loadProducts()},maxPrice(){this.loadProducts()}},components:{catalogItem:ie,catalogPagination:ye,catalogFilter:Ne,spinnerBlock:rt,refreshBlock:dt},created(){this.$route.params.id&&(this.categoryId=this.$route.params.id),this.loadProducts()}};const _t=(0,b.Z)(ut,[["render",F]]);var pt=_t;const mt={class:"content container"},gt={class:"content__top"},ht={class:"breadcrumbs"},kt={class:"breadcrumbs__item"},yt={class:"breadcrumbs__item"},ft={key:0,class:"breadcrumbs__item"},bt={class:"breadcrumbs__link"},wt={key:0,class:"item"},vt={key:1,class:"item"},Pt={key:2,class:"item"},It={class:"item__pics pics"},Ct={class:"pics__wrapper"},Dt=["src","srcset"],Lt={class:"item__info"},xt={class:"item__code"},Et={class:"item__title"},zt={class:"item__form"},Ut={class:"item__row item__row--center"},$t={class:"form__counter"},Bt=(0,a._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-minus"})],-1),Tt=[Bt],Kt=(0,a._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-plus"})],-1),St=[Kt],Mt={class:"item__price"},jt={class:"item__row"},qt={class:"form__block"},Vt=(0,a._)("legend",{class:"form__legend"},"Цвет",-1),At={class:"colors colors--black"},Ot={class:"colors__label"},Wt=["id","name","value","checked","onClick"],Zt={class:"form__block"},Ht=(0,a._)("legend",{class:"form__legend"},"Размер",-1),Yt={class:"form__label form__label--small form__label--select"},Ft=["value","checked"],Nt=["disabled"],Gt={class:"item__desc"},Jt={class:"tabs"},Rt={class:"tabs__item"},Qt={class:"tabs__item"},Xt={class:"item__content"};function er(e,t,r,o,c,l){const n=(0,a.up)("router-link"),d=(0,a.up)("spinnerBlock"),u=(0,a.up)("refreshBlock"),_=(0,a.up)("aboutItem"),p=(0,a.up)("aboutDelivery");return(0,a.wg)(),(0,a.iD)("main",mt,[(0,a._)("div",gt,[(0,a._)("ul",ht,[(0,a._)("li",kt,[(0,a.Wm)(n,{class:"breadcrumbs__link",to:{name:"catalog"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Каталог ")])),_:1})]),(0,a._)("li",yt,[c.product?((0,a.wg)(),(0,a.j4)(n,{key:0,class:"breadcrumbs__link",to:{name:"category",params:{id:c.product.category.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(c.product.category.title),1)])),_:1},8,["to"])):(0,a.kq)("",!0)]),c.product?((0,a.wg)(),(0,a.iD)("li",ft,[(0,a._)("a",bt,(0,i.zw)(c.product.title),1)])):(0,a.kq)("",!0)])]),c.loadingProcess?((0,a.wg)(),(0,a.iD)("section",wt,[(0,a.Wm)(d,{class:"loading"})])):c.loadingError?((0,a.wg)(),(0,a.iD)("section",vt,[(0,a.Wm)(u,{class:"loading",onClick:t[0]||(t[0]=e=>l.refresh())})])):((0,a.wg)(),(0,a.iD)("section",Pt,[(0,a._)("div",It,[(0,a._)("div",Ct,[(0,a._)("img",{width:"570",height:"570",src:l.checkImage(c.product),srcset:l.checkImage(c.product),alt:"Название товара"},null,8,Dt)])]),(0,a._)("div",Lt,[(0,a._)("span",xt,"Артикул: "+(0,i.zw)(c.product.id),1),(0,a._)("h2",Et,(0,i.zw)(c.product.title),1),(0,a._)("div",zt,[(0,a._)("form",{class:"form",action:"#",method:"POST",onSubmit:t[6]||(t[6]=(0,s.iM)((e=>l.addToCart()),["prevent"]))},[(0,a._)("div",Ut,[(0,a._)("div",$t,[(0,a._)("button",{type:"button","aria-label":"Убрать один товар",onClick:t[1]||(t[1]=e=>l.productCountChanging("-"))},Tt),(0,a.wy)((0,a._)("input",{type:"text",name:"count","onUpdate:modelValue":t[2]||(t[2]=e=>c.count=e),onBlur:t[3]||(t[3]=e=>l.checkInput())},null,544),[[s.nr,c.count,void 0,{number:!0}]]),(0,a._)("button",{type:"button","aria-label":"Добавить один товар",onClick:t[4]||(t[4]=e=>l.productCountChanging("+"))},St)]),(0,a._)("b",Mt,(0,i.zw)(l.formattedPrice(c.product.price))+" ₽ ",1)]),(0,a._)("div",jt,[(0,a._)("fieldset",qt,[Vt,(0,a._)("ul",At,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.product.colors,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"colors__item",key:e.color.id},[(0,a._)("label",Ot,[(0,a._)("input",{class:"colors__radio sr-only",type:"radio",id:"colors-for-"+e.color.id,name:"colors-for-"+c.product.slug,value:c.checkedColorPositionInList,checked:c.product.colors[c.checkedColorPositionInList].color==e.color,onClick:t=>l.chooseColor(c.product.colors,e)},null,8,Wt),(0,a._)("span",{class:"colors__value",style:(0,i.j5)({background:e.color.code})},null,4)])])))),128))])]),(0,a._)("fieldset",Zt,[Ht,(0,a._)("label",Yt,[(0,a.wy)((0,a._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":t[5]||(t[5]=e=>c.checkedSizeId=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.product.sizes,(e=>((0,a.wg)(),(0,a.iD)("option",{value:e.id,checked:c.product.sizes[c.checkedSizeId]==e,key:e.id},(0,i.zw)(e.title),9,Ft)))),128))],512),[[s.bM,c.checkedSizeId,void 0,{number:!0}]])])])]),(0,a._)("button",{class:"item__button button button--primery",type:"submit",disabled:c.loadingProcess}," В корзину ",8,Nt)],32)])]),(0,a._)("div",Gt,[(0,a._)("ul",Jt,[(0,a._)("li",Rt,[(0,a._)("a",{class:(0,i.C_)(["tabs__link",{"tabs__link--current":1==c.infoBlock}]),onClick:t[7]||(t[7]=(0,s.iM)((e=>c.infoBlock=1),["prevent"])),href:"#"}," Информация о товаре ",2)]),(0,a._)("li",Qt,[(0,a._)("a",{class:(0,i.C_)(["tabs__link",{"tabs__link--current":2==c.infoBlock}]),onClick:t[8]||(t[8]=(0,s.iM)((e=>c.infoBlock=2),["prevent"])),href:"#"}," Доставка и возврат ",2)])]),(0,a._)("div",Xt,[1==c.infoBlock?((0,a.wg)(),(0,a.j4)(_,{key:0,product:c.product},null,8,["product"])):2==c.infoBlock?((0,a.wg)(),(0,a.j4)(p,{key:1})):(0,a.kq)("",!0)])])]))])}const tr=(0,a._)("h3",null,"Состав:",-1),rr=(0,a._)("br",null,null,-1),sr=(0,a._)("h3",null,"Уход:",-1),ar=(0,a._)("p",null,[(0,a.Uk)(" Машинная стирка при макс. 30ºC короткий отжим"),(0,a._)("br"),(0,a.Uk)(" Гладить при макс. 110ºC"),(0,a._)("br"),(0,a.Uk)(" Не использовать машинную сушку"),(0,a._)("br"),(0,a.Uk)(" Отбеливать запрещено"),(0,a._)("br"),(0,a.Uk)(" Не подвергать химчистке"),(0,a._)("br")],-1);function or(e,t,r,s,o,c){return(0,a.wg)(),(0,a.iD)(a.HY,null,[tr,(0,a._)("p",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.product.materials,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},[(0,a.Uk)((0,i.zw)(e.productsCount)+"% "+(0,i.zw)(e.title)+" ",1),rr])))),128))]),sr,ar],64)}var ir={props:["product"]};const cr=(0,b.Z)(ir,[["render",or]]);var lr=cr;const nr=(0,a._)("h3",null,"Доставка:",-1),dr=(0,a._)("p",null,[(0,a.Uk)(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),(0,a._)("br"),(0,a.Uk)(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),(0,a._)("br")],-1),ur=(0,a._)("h3",null,"Возврат:",-1),_r=(0,a._)("p",null,[(0,a.Uk)(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),(0,a._)("br"),(0,a.Uk)(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),(0,a._)("br"),(0,a.Uk)(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),(0,a._)("br")],-1);function pr(e,t,r,s,o,i){return(0,a.wg)(),(0,a.iD)(a.HY,null,[nr,dr,ur,_r],64)}var mr={};const gr=(0,b.Z)(mr,[["render",pr]]);var hr=gr,kr={data(){return{loadingProcess:!1,loadingError:!1,product:null,infoBlock:1,checkedColorPositionInList:0,count:1,checkedSizeId:0}},methods:{...(0,z.nv)(["addToBasket"]),...(0,z.OI)(["updateUserAccessKey"]),checkImage(e){return console.log(e),e.colors[this.checkedColorPositionInList].gallery?e.colors[this.checkedColorPositionInList].gallery[0].file.url:"/moire-practice-page/img/placeholder-3.png"},loadProduct(){return this.loadingProcess=!0,this.loadingError=!1,fetch(`${He}/api/products/${this.$route.params.id}`).then((async e=>{const t=await e.json();this.product=t,this.checkedSizeId=t.sizes[0].id})).catch((()=>{this.loadingError=!0})).finally((()=>{this.loadingProcess=!1}))},chooseColor(e,t){const r=(0,re.IU)(e),s=(0,re.IU)(t);let a=0;return r.forEach((e=>{e===s&&(this.checkedColorPositionInList=a,console.log(a)),a+=1})),this.checkedColorPositionInList},productCountChanging(e){"+"===e?this.count+=1:"-"===e&&(this.count>1?this.count-=1:this.count=1)},checkInput(){(this.count<1||!Number(this.count))&&(this.count=1)},async addToCart(){const e=document.querySelector(".item__button.button.button--primery");e.lastChild.textContent="Добавляется",console.log(this.product.id,this.product.colors[this.checkedColorPositionInList].color.id,this.checkedSizeId,this.count);const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),await this.addToBasket({productId:this.product.id,colorId:this.product.colors[this.checkedColorPositionInList].color.id,sizeId:this.checkedSizeId,quantity:this.count}),this.$store.state.loadingError?this.$store.state.loadingError&&(e.lastChild.textContent="Ошибка",e.classList.add("btn-error")):(e.lastChild.textContent="Добавлено",e.classList.add("btn-success")),setTimeout((()=>{e.lastChild.textContent="В корзину",e.classList.remove("btn-error"),e.classList.remove("btn-success")}),5e3)},formattedPrice(e){return se(e)},refresh(){this.loadProduct()}},computed:{},created(){this.loadProduct()},components:{aboutItem:lr,aboutDelivery:hr,spinnerBlock:rt,refreshBlock:dt}};const yr=(0,b.Z)(kr,[["render",er]]);var fr=yr;const br={class:"content container"},wr={class:"content__top"},vr={class:"breadcrumbs"},Pr={class:"breadcrumbs__item"},Ir={key:0,class:"breadcrumbs__item"},Cr=(0,a._)("a",{class:"breadcrumbs__link"}," Корзина ",-1),Dr=[Cr],Lr={class:"content__row"},xr=(0,a._)("h1",{class:"content__title"}," Корзина ",-1),Er={key:0,class:"content__info"},zr={key:0,class:"cart loading"},Ur={key:1,class:"cart"},$r={key:2,class:"cart"},Br={class:"cart__field"},Tr={class:"cart__list"},Kr={key:0,class:"cart__block"},Sr=(0,a._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),Mr={class:"cart__price"},jr={key:0,class:"cart__button button button--primery",type:"submit"};function qr(e,t,r,o,c,l){const n=(0,a.up)("router-link"),d=(0,a.up)("spinnerBlock"),u=(0,a.up)("refreshBlock"),_=(0,a.up)("cartItem");return(0,a.wg)(),(0,a.iD)("main",br,[(0,a._)("div",wr,[(0,a._)("ul",vr,[(0,a._)("li",Pr,[(0,a.Wm)(n,{class:"breadcrumbs__link",to:{name:"catalog"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Каталог ")])),_:1})]),e.getCartProducts?((0,a.wg)(),(0,a.iD)("li",Ir,Dr)):(0,a.kq)("",!0)]),(0,a._)("div",Lr,[xr,e.getCartProducts?((0,a.wg)(),(0,a.iD)("span",Er,(0,i.zw)(e.getCartProducts.length)+" товара ",1)):(0,a.kq)("",!0)])]),e.getLoadingProcess?((0,a.wg)(),(0,a.iD)("section",zr,[(0,a.Wm)(d)])):(0,a.kq)("",!0),e.getLoadingError?((0,a.wg)(),(0,a.iD)("section",Ur,[(0,a.Wm)(u,{onClick:t[0]||(t[0]=e=>l.refresh())})])):((0,a.wg)(),(0,a.iD)("section",$r,[(0,a._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:t[1]||(t[1]=(0,s.iM)((e=>l.ordering()),["prevent"]))},[(0,a._)("div",Br,[(0,a._)("ul",Tr,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.getCartProducts,(e=>((0,a.wg)(),(0,a.j4)(_,{class:"cart__item product",product:e,key:e.id},null,8,["product"])))),128))])]),e.getCartProducts?((0,a.wg)(),(0,a.iD)("div",Kr,[Sr,(0,a._)("p",Mr,[(0,a.Uk)(" Итого: "),(0,a._)("span",null,(0,i.zw)(l.formattedPrice(e.getCartTotalPrice))+" ₽",1)]),e.getCartProducts.length?((0,a.wg)(),(0,a.iD)("button",jr," Оформить заказ ")):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],32)]))])}r(7658);const Vr={class:"cart__item product"},Ar={class:"product__pic"},Or=["src","srcset","alt"],Wr={class:"product__title"},Zr={class:"product__info product__info--color"},Hr={class:"product__info product__info--color"},Yr={class:"product__code"},Fr={class:"product__counter form__counter"},Nr=(0,a._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-minus"})],-1),Gr=[Nr],Jr=(0,a._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-plus"})],-1),Rr=[Jr],Qr={class:"product__price"},Xr=(0,a._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-close"})],-1),es=[Xr];function ts(e,t,r,o,c,l){return(0,a.wg)(),(0,a.iD)("li",Vr,[(0,a._)("div",Ar,[(0,a._)("img",{src:l.checkImage(r.product),width:"120",height:"120",srcset:l.checkImage(r.product),alt:r.product.product.title},null,8,Or)]),(0,a._)("h3",Wr,(0,i.zw)(r.product.product.title),1),(0,a._)("p",Zr,[(0,a.Uk)(" Цвет: "),(0,a._)("span",null,[(0,a._)("i",{style:(0,i.j5)({background:r.product.color.color.code})},null,4),(0,a.Uk)(" "+(0,i.zw)(r.product.color.color.title),1)]),(0,a._)("span",Hr," Размер: "+(0,i.zw)(r.product.size.title),1)]),(0,a._)("span",Yr," Артикул: "+(0,i.zw)(r.product.product.id),1),(0,a._)("div",Fr,[(0,a._)("button",{type:"button","aria-label":"Убрать один товар",onClick:t[0]||(t[0]=e=>l.changeProduct(r.product.id,r.product.quantity-1))},Gr),(0,a.wy)((0,a._)("input",{type:"text",name:"count","onUpdate:modelValue":t[1]||(t[1]=e=>r.product.quantity=e),onBlur:t[2]||(t[2]=e=>l.changeProduct(r.product.id,r.product.quantity))},null,544),[[s.nr,r.product.quantity]]),(0,a._)("button",{type:"button","aria-label":"Добавить один товар",onClick:t[3]||(t[3]=e=>l.changeProduct(r.product.id,r.product.quantity+1))},Rr)]),(0,a._)("b",Qr,(0,i.zw)(l.formattedPrice(r.product.price*r.product.quantity)),1),(0,a._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:t[4]||(t[4]=e=>l.deleteProduct(r.product.id))},es)])}var rs={props:["product"],computed:{},methods:{...(0,z.nv)(["deleteFromBasket","changeProductInBasket"]),formattedPrice(e){return se(e)},deleteProduct(e){this.deleteFromBasket(e)},changeProduct(e,t){t>0?this.changeProductInBasket({basketItemId:e,quantity:t}):this.deleteFromBasket(e)},checkImage(e){const t=(0,re.IU)(e);return t.color.gallery?t.color.gallery[0].file.url:"/moire-practice-page/img/placeholder-3.png"}}};const ss=(0,b.Z)(rs,[["render",ts]]);var as=ss,os={computed:{...(0,z.Se)(["getCartProducts","getCartTotalPrice","getLoadingProcess","getLoadingError"])},methods:{...(0,z.nv)(["loadBasket"]),formattedPrice(e){return se(e)},ordering(){this.$router.push({name:"ordering"})},refresh(){this.loadBasket()}},components:{cartItem:as,spinnerBlock:rt,refreshBlock:dt}};const is=(0,b.Z)(os,[["render",qr]]);var cs=is;const ls={class:"content container"},ns=(0,a.uE)('<div class="content__top"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="index.html"> Каталог </a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link"> Корзина </a></li></ul><div class="content__row"><h1 class="content__title"> Страница не найдена. </h1><span class="content__info"> К сожалению данной страницы не существует, проверьте, верно ли введена ссылка. </span></div></div>',1),ds=[ns];function us(e,t,r,s,o,i){return(0,a.wg)(),(0,a.iD)("main",ls,ds)}var _s={};const ps=(0,b.Z)(_s,[["render",us]]);var ms=ps;const gs={class:"content container"},hs={class:"content__top"},ks={class:"breadcrumbs"},ys={class:"breadcrumbs__item"},fs={class:"breadcrumbs__item"},bs=(0,a._)("li",{class:"breadcrumbs__item"},[(0,a._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),ws=(0,a._)("div",{class:"content__row"},[(0,a._)("h1",{class:"content__title"}," Оформление заказа ")],-1),vs={class:"cart"},Ps={class:"cart__field"},Is={class:"cart__data"},Cs={class:"form__label"},Ds=(0,a._)("span",{class:"form__value"},"ФИО",-1),Ls={key:0,class:"form__error"},xs={class:"form__label"},Es=(0,a._)("span",{class:"form__value"},"Адрес доставки",-1),zs={key:0,class:"form__error"},Us={class:"form__label"},$s=(0,a._)("span",{class:"form__value"},"Телефон",-1),Bs={key:0,class:"form__error"},Ts={class:"form__label"},Ks=(0,a._)("span",{class:"form__value"},"Email",-1),Ss={key:0,class:"form__error"},Ms={class:"form__label"},js=(0,a._)("span",{class:"form__value"},"Комментарий к заказу",-1),qs={class:"cart__options"},Vs=(0,a._)("h3",{class:"cart__title"},"Доставка",-1),As={class:"cart__options options"},Os={class:"options__label"},Ws=["value","checked"],Zs={key:0,class:"options__value"},Hs=(0,a._)("b",null,"бесплатно",-1),Ys={key:1,class:"options__value"},Fs=(0,a._)("h3",{class:"cart__title"},"Оплата",-1),Ns={class:"cart__options options"},Gs={class:"options__item"},Js={class:"options__label"},Rs=(0,a._)("span",{class:"options__value"}," Картой при получении ",-1),Qs={class:"options__item"},Xs={class:"options__label"},ea=(0,a._)("span",{class:"options__value"}," Наличными при получении ",-1),ta={key:0,class:"cart__block"},ra={key:1,class:"cart__block"},sa={key:2,class:"cart__block"},aa={class:"cart__orders"},oa={key:0,class:"cart__total"},ia={key:0},ca={key:1},la=["disabled"],na={key:3,class:"cart__error form__error-block"},da=(0,a._)("h4",null,"Заявка не отправлена!",-1),ua=(0,a._)("p",null," Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу. ",-1),_a=[da,ua];function pa(e,t,r,o,c,l){const n=(0,a.up)("router-link"),d=(0,a.up)("spinnerBlock"),u=(0,a.up)("refreshBlock");return(0,a.wg)(),(0,a.iD)("main",gs,[(0,a._)("div",hs,[(0,a._)("ul",ks,[(0,a._)("li",ys,[(0,a.Wm)(n,{class:"breadcrumbs__link",to:{name:"catalog"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Каталог ")])),_:1})]),(0,a._)("li",fs,[(0,a.Wm)(n,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Корзина ")])),_:1})]),bs]),ws]),(0,a._)("section",vs,[(0,a._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:t[13]||(t[13]=(0,s.iM)((e=>l.ordering()),["prevent"]))},[(0,a._)("div",Ps,[(0,a._)("div",Is,[(0,a._)("label",Cs,[(0,a.wy)((0,a._)("input",{onBlur:t[0]||(t[0]=e=>l.poolValidation("name")),class:"form__input",type:"text",name:"name",placeholder:"Введите ваше полное имя","onUpdate:modelValue":t[1]||(t[1]=e=>c.name=e)},null,544),[[s.nr,c.name]]),Ds,c.nameError?((0,a.wg)(),(0,a.iD)("span",Ls,"Некорректное имя")):(0,a.kq)("",!0)]),(0,a._)("label",xs,[(0,a.wy)((0,a._)("input",{onBlur:t[2]||(t[2]=e=>l.poolValidation("address")),class:"form__input",type:"text",name:"address",placeholder:"Введите ваш адрес","onUpdate:modelValue":t[3]||(t[3]=e=>c.address=e)},null,544),[[s.nr,c.address]]),Es,c.addressError?((0,a.wg)(),(0,a.iD)("span",zs,"Некорректный адрес")):(0,a.kq)("",!0)]),(0,a._)("label",Us,[(0,a.wy)((0,a._)("input",{onBlur:t[4]||(t[4]=e=>l.poolValidation("phone")),class:"form__input phone",type:"tel",name:"phone",placeholder:"Введите ваш телефон",id:"phone","onUpdate:modelValue":t[5]||(t[5]=e=>c.phone=e)},null,544),[[s.nr,c.phone]]),$s,c.phoneError?((0,a.wg)(),(0,a.iD)("span",Bs,"Неверный формат телефона")):(0,a.kq)("",!0)]),(0,a._)("label",Ts,[(0,a.wy)((0,a._)("input",{onBlur:t[6]||(t[6]=e=>l.poolValidation("email")),class:"form__input",type:"email",name:"email",placeholder:"Введи ваш Email","onUpdate:modelValue":t[7]||(t[7]=e=>c.email=e)},null,544),[[s.nr,c.email]]),Ks,c.emailError?((0,a.wg)(),(0,a.iD)("span",Ss,"Неверный формат почты")):(0,a.kq)("",!0)]),(0,a._)("label",Ms,[(0,a.wy)((0,a._)("textarea",{class:"form__input form__input--area",name:"comments",placeholder:"Ваши пожелания","onUpdate:modelValue":t[8]||(t[8]=e=>c.comment=e)},null,512),[[s.nr,c.comment]]),js])]),(0,a._)("div",qs,[Vs,(0,a._)("ul",As,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.deliveriesList,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"options__item",key:e.id},[(0,a._)("label",Os,[(0,a.wy)((0,a._)("input",{class:"options__radio sr-only",type:"radio","onUpdate:modelValue":t[9]||(t[9]=e=>c.deliveryTypeId=e),name:"delivery",value:e.id,checked:c.deliveriesList[0].id==e.id},null,8,Ws),[[s.G2,c.deliveryTypeId]]),0==e.price?((0,a.wg)(),(0,a.iD)("span",Zs,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),Hs])):((0,a.wg)(),(0,a.iD)("span",Ys,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),(0,a._)("b",null,(0,i.zw)(e.price)+" ₽",1)]))])])))),128))]),Fs,(0,a._)("ul",Ns,[(0,a._)("li",Gs,[(0,a._)("label",Js,[(0,a.wy)((0,a._)("input",{class:"options__radio sr-only",type:"radio",name:"pay","onUpdate:modelValue":t[10]||(t[10]=e=>c.paymentTypeId=e),value:1,checked:""},null,512),[[s.G2,c.paymentTypeId]]),Rs])]),(0,a._)("li",Qs,[(0,a._)("label",Xs,[(0,a.wy)((0,a._)("input",{class:"options__radio sr-only",type:"radio",name:"pay","onUpdate:modelValue":t[11]||(t[11]=e=>c.paymentTypeId=e),value:2},null,512),[[s.G2,c.paymentTypeId]]),ea])])])])]),e.getLoadingProcess?((0,a.wg)(),(0,a.iD)("div",ta,[(0,a.Wm)(d)])):e.getLoadingError?((0,a.wg)(),(0,a.iD)("div",ra,[(0,a.Wm)(u,{onClick:t[12]||(t[12]=e=>l.refresh())})])):((0,a.wg)(),(0,a.iD)("div",sa,[(0,a._)("ul",aa,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.getCartProducts,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"cart__order",key:e.id},[(0,a._)("h3",null,(0,i.zw)(e.product.title),1),(0,a._)("b",null,(0,i.zw)(l.formattedPrice(e.price*e.quantity))+" ₽",1),(0,a._)("span",null,"Артикул: "+(0,i.zw)(e.product.id),1)])))),128))]),c.deliveriesList[c.deliveryTypeId-1]?((0,a.wg)(),(0,a.iD)("div",oa,[(0,a._)("p",null,[(0,a.Uk)("Доставка: "),0==!c.deliveriesList[c.deliveryTypeId-1].price?((0,a.wg)(),(0,a.iD)("b",ia," бесплатно ")):((0,a.wg)(),(0,a.iD)("b",ca,(0,i.zw)(c.deliveriesList[c.deliveryTypeId-1].price)+" ₽ ",1))]),(0,a._)("p",null,[(0,a.Uk)("Итого: "),(0,a._)("b",null,(0,i.zw)(e.getCartProducts.length),1),(0,a.Uk)(" товара на сумму "),(0,a._)("b",null,(0,i.zw)(l.formattedPrice(Number(e.getCartTotalPrice)+Number(c.deliveriesList[c.deliveryTypeId-1].price)))+" ₽ ",1)])])):(0,a.kq)("",!0),(0,a._)("button",{class:"cart__button button button--primery",type:"submit",disabled:c.loadingProcess||!c.name||!c.address||!c.phone||!c.email||c.nameError||c.addressError||c.phoneError||c.emailError}," Оформить заказ ",8,la)])),c.loadingError?((0,a.wg)(),(0,a.iD)("div",na,_a)):(0,a.kq)("",!0)],32)])])}var ma=r(922),ga=r(1482),ha=r.n(ga),ka={data(){return{loadingProcess:!1,loadingError:!1,name:"",address:"",phone:"",email:"",nameError:!1,addressError:!1,phoneError:!1,emailError:!1,deliveryTypeId:1,paymentTypeId:1,comment:"",deliveriesList:[],orderId:0}},computed:{...(0,z.Se)(["getCartProducts","getCartTotalPrice","getLoadingProcess","getLoadingError"])},methods:{...(0,z.nv)(["loadBasket"]),formattedPrice(e){return se(e)},ordering(){return this.loadingProcess=!0,this.loadingError=!1,fetch(`${He}/api/orders?userAccessKey=${localStorage.getItem("userAccessKey")}`,{method:"POST",body:JSON.stringify({name:this.name,address:this.address,phone:this.phone,email:this.email,deliveryTypeId:this.deliveryTypeId,paymentTypeId:this.paymentTypeId,comment:this.comment}),headers:{"Content-Type":"application/json"}}).then((async e=>{const t=await e.json();this.orderId=t.id,this.loadBasket(),this.$router.push({name:"order",params:{id:this.orderId}})})).catch((()=>{this.loadingError=!0})).finally((()=>{this.loadingProcess=!1}))},getDeliveriesList(){return fetch(`${He}/api/deliveries`).then((async e=>{const t=await e.json();this.deliveriesList=await t}))},poolValidation(e){"name"===e?(0,ma.Z)().minLength(3).test(this.name)?this.nameError=!1:this.nameError=!0:"address"===e?(0,ma.Z)().minLength(3).test(this.address)?this.addressError=!1:this.addressError=!0:"email"===e?(0,ma.Z)().includes("@").includes(".").not.includes(" ").test(this.email)?this.emailError=!1:this.emailError=!0:"phone"===e&&((0,ma.Z)().minLength(7).test(this.phone)?this.phoneError=!1:this.phoneError=!0)},refresh(){this.loadBasket()}},created(){this.getDeliveriesList()},mounted(){const e=new(ha())("+7(999)999-99-99"),t=document.getElementById("phone");e.mask(t)},components:{spinnerBlock:rt,refreshBlock:dt}};const ya=(0,b.Z)(ka,[["render",pa]]);var fa=ya;const ba={class:"content container"},wa={class:"content__top"},va={class:"breadcrumbs"},Pa={class:"breadcrumbs__item"},Ia={class:"breadcrumbs__item"},Ca=(0,a._)("li",{class:"breadcrumbs__item"},[(0,a._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),Da={key:0,class:"content__title"},La={key:0},xa={key:1},Ea={key:0,class:"cart"},za={key:1,class:"cart"},Ua={key:2,class:"cart"},$a={key:0};function Ba(e,t,r,s,o,c){const l=(0,a.up)("router-link"),n=(0,a.up)("SpinnerBlock"),d=(0,a.up)("RefreshBlock"),u=(0,a.up)("successOrdering");return(0,a.wg)(),(0,a.iD)("main",ba,[(0,a._)("div",wa,[(0,a._)("ul",va,[(0,a._)("li",Pa,[(0,a.Wm)(l,{class:"breadcrumbs__link",to:{name:"catalog"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Каталог ")])),_:1})]),(0,a._)("li",Ia,[(0,a.Wm)(l,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" Корзина ")])),_:1})]),Ca]),o.loadingProcess?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("h1",Da,[o.order.error?((0,a.wg)(),(0,a.iD)("span",La,(0,i.zw)(o.order.error.message),1)):((0,a.wg)(),(0,a.iD)("span",xa,[(0,a.Uk)(" Заказ оформлен "),(0,a._)("span",null,"№ "+(0,i.zw)(o.order.id),1)]))]))]),o.loadingProcess?((0,a.wg)(),(0,a.iD)("section",Ea,[(0,a.Wm)(n)])):o.loadingError?((0,a.wg)(),(0,a.iD)("section",za,[(0,a.Wm)(d,{onClick:t[0]||(t[0]=e=>c.refresh())})])):((0,a.wg)(),(0,a.iD)("section",Ua,[o.order.error?((0,a.wg)(),(0,a.iD)("div",$a,"Возможно в номере заказа имеется опечатка")):((0,a.wg)(),(0,a.j4)(u,{key:1,order:o.order},null,8,["order"]))]))])}const Ta={class:"cart__form form",action:"#",method:"POST"},Ka={class:"cart__field"},Sa=(0,a._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),Ma={class:"dictionary"},ja={class:"dictionary__item"},qa=(0,a._)("span",{class:"dictionary__key"}," Получатель ",-1),Va={class:"dictionary__value"},Aa={class:"dictionary__item"},Oa=(0,a._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),Wa={class:"dictionary__value"},Za={class:"dictionary__item"},Ha=(0,a._)("span",{class:"dictionary__key"}," Телефон ",-1),Ya={class:"dictionary__value"},Fa={class:"dictionary__item"},Na=(0,a._)("span",{class:"dictionary__key"}," Email ",-1),Ga={class:"dictionary__value"},Ja={class:"dictionary__item"},Ra=(0,a._)("span",{class:"dictionary__key"}," Способ оплаты ",-1),Qa={class:"dictionary__value"},Xa={class:"cart__block"},eo={class:"cart__orders"},to={class:"cart__total"},ro={key:0},so={key:1};function ao(e,t,r,s,o,c){return(0,a.wg)(),(0,a.iD)("form",Ta,[(0,a._)("div",Ka,[Sa,(0,a._)("ul",Ma,[(0,a._)("li",ja,[qa,(0,a._)("span",Va,(0,i.zw)(r.order.name),1)]),(0,a._)("li",Aa,[Oa,(0,a._)("span",Wa,(0,i.zw)(r.order.address),1)]),(0,a._)("li",Za,[Ha,(0,a._)("span",Ya,(0,i.zw)(r.order.phone),1)]),(0,a._)("li",Fa,[Na,(0,a._)("span",Ga,(0,i.zw)(r.order.email),1)]),(0,a._)("li",Ja,[Ra,(0,a._)("span",Qa,(0,i.zw)(r.order.paymentType),1)])])]),(0,a._)("div",Xa,[(0,a._)("ul",eo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.order.basket.items,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"cart__order",key:e.id},[(0,a._)("h3",null,(0,i.zw)(e.product.title),1),(0,a._)("b",null,(0,i.zw)(c.formattedPrice(e.price))+" ₽",1),(0,a._)("span",null,"Артикул: "+(0,i.zw)(e.product.id),1)])))),128))]),(0,a._)("div",to,[(0,a._)("p",null,[(0,a.Uk)("Доставка: "),0==r.order.deliveryType.price?((0,a.wg)(),(0,a.iD)("b",ro," бесплатно")):((0,a.wg)(),(0,a.iD)("b",so,(0,i.zw)(c.formattedPrice(r.order.deliveryType.price))+" ₽",1))]),(0,a._)("p",null,[(0,a.Uk)("Итого: "),(0,a._)("b",null,(0,i.zw)(r.order.basket.items.length),1),(0,a.Uk)(" товара на сумму "),(0,a._)("b",null,(0,i.zw)(r.order.totalPrice)+" ₽",1)])])])])}var oo={props:["order"],methods:{formattedPrice(e){return se(e)}}};const io=(0,b.Z)(oo,[["render",ao]]);var co=io,lo={data(){return{order:null,loadingProcess:!1,loadingError:!1}},components:{successOrdering:co,SpinnerBlock:rt,RefreshBlock:dt},methods:{orderingData(){this.loadingProcess=!0;const e=this.$route.params.id;return console.log(e),fetch(`${He}/api/orders/${e}/?userAccessKey=${localStorage.getItem("userAccessKey")}`,{method:"GET"}).then((async e=>{const t=await e.json();this.order=t})).catch((e=>{this.error=e,this.loadingError=!0})).finally((()=>{this.loadingProcess=!1}))},formattedPrice(e){return se(e)},refresh(){this.orderingData()}},created(){this.orderingData()}};const no=(0,b.Z)(lo,[["render",Ba]]);var uo=no;const _o=[{name:"catalog",component:pt,path:"/"},{name:"category",component:pt,path:"/category/:id"},{name:"product",component:fr,path:"/products/:id"},{name:"cart",component:cs,path:"/cart"},{name:"ordering",component:fa,path:"/ordering"},{name:"order",component:uo,path:"/order/:id"},{name:"name",component:ms,path:"/pathMatch(.*)*"}],po=(0,T.p7)({history:(0,T.PO)("/moire-practice-page/"),routes:_o});var mo=po,go=(0,z.MT)({state:{userAccessKey:null,cartProducts:[],productsData:[],pages:0,page:0,loadingProcess:!1,loadingError:!1,categoryId:1},getters:{getCategoryId(e){return e.categoryId},getUserAccessKey(e){return e.userAccessKey},getCartProducts(e){return e.cartProducts},getProductsData(e){return e.productsData},getPages(e){return e.pages},getPage(e){return e.page},getLoadingProcess(e){return e.loadingProcess},getLoadingError(e){return e.loadingError},getCartTotalPrice(e){let t=0;return e.cartProducts.forEach((e=>{t+=e.price*e.quantity})),t}},mutations:{"updateСategoryId"(e,t){e.categoryId=t},updateUserAccessKey(e,t){e.userAccessKey=t},updateCartProducts(e,t){e.cartProducts=t},updateProductsData(e,t){e.productsData=t},updatePages(e,t){e.pages=t},updatePage(e,t){e.page=t},updateLoadingProcess(e,t){e.loadingProcess=t},updateLoadingError(e,t){e.loadingError=t}},actions:{loadBasket(e){return e.commit("updateLoadingProcess",!0),e.commit("updateLoadingError",!1),fetch(`${He}/api/baskets?userAccessKey=${e.state.userAccessKey}`).then((async t=>{const r=await t.json();e.commit("updateCartProducts",r.items),e.state.userAccessKey||localStorage.setItem("userAccessKey",r.user.accessKey)})).catch((t=>{console.log(t),e.commit("updateLoadingError",!0)})).finally((()=>{e.commit("updateLoadingProcess",!1)}))},addToBasket(e,{productId:t,colorId:r,sizeId:s,quantity:a}){return e.commit("updateLoadingProcess",!0),e.commit("updateLoadingError",!1),console.log(t,r,s,a),fetch(`${He}/api/baskets/products?userAccessKey=${e.state.userAccessKey}`,{method:"POST",body:JSON.stringify({productId:t,colorId:r,sizeId:s,quantity:a}),headers:{"Content-Type":"application/json"}}).then((async t=>{const r=await t.json();e.commit("updateCartProducts",r.items),e.state.userAccessKey||localStorage.setItem("userAccessKey",r.user.accessKey)})).catch((t=>{console.log(t),e.commit("updateLoadingError",!0)})).finally((()=>{e.commit("updateLoadingProcess",!1)}))},changeProductInBasket(e,{basketItemId:t,quantity:r}){return e.commit("updateLoadingProcess",!0),e.commit("updateLoadingError",!1),console.log(t),fetch(`${He}/api/baskets/products?userAccessKey=${e.state.userAccessKey}`,{method:"PUT",body:JSON.stringify({basketItemId:t,quantity:r}),headers:{"Content-Type":"application/json"}}).then((async t=>{const r=await t.json();e.commit("updateCartProducts",r.items)})).catch((t=>{console.log(t),e.commit("updateLoadingError",!0)})).finally((()=>{e.commit("updateLoadingProcess",!1)}))},deleteFromBasket(e,t){return e.commit("updateLoadingProcess",!0),e.commit("updateLoadingError",!1),console.log(t),fetch(`${He}/api/baskets/products?userAccessKey=${e.state.userAccessKey}`,{method:"DELETE",body:JSON.stringify({basketItemId:t}),headers:{"Content-Type":"application/json"}}).then((async t=>{const r=await t.json();e.commit("updateCartProducts",r.items)})).catch((t=>{console.log(t),e.commit("updateLoadingError",!0)})).finally((()=>{e.commit("updateLoadingProcess",!1)}))},loadProducts(e,t=1,r=12){return e.commit("updateLoadingProcess",!0),e.commit("updateLoadingError",!1),fetch(`${He}/api/products?page=${t}&limit=${r}`).then((async t=>{const r=await t.json();e.commit("updateProductsData",r.items),e.commit("updatePages",r.pagination.pages),e.commit("updatePage",r.pagination.page)})).catch((t=>{console.log(t),e.commit("updateLoadingError",!0)})).finally((()=>{e.commit("updateLoadingProcess",!1)}))}},modules:{}});(0,s.ri)(B).use(go).use(mo).mount("#app")}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,s,a,o){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],o=e[d][2];for(var c=!0,l=0;l<s.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((function(e){return r.O[e](s[l])}))?s.splice(l--,1):(c=!1,o<i&&(i=o));if(c){e.splice(d--,1);var n=a();void 0!==n&&(t=n)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,a,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,i=s[0],c=s[1],l=s[2],n=0;if(i.some((function(t){return 0!==e[t]}))){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(l)var d=l(r)}for(t&&t(s);n<i.length;n++)o=i[n],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},s=self["webpackChunkmoire_app"]=self["webpackChunkmoire_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(1835)}));s=r.O(s)})();
//# sourceMappingURL=app.355980ff.js.map